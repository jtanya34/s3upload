{"ast":null,"code":"var _jsxFileName = \"/Users/tanyajain/study/s3upload/client/src/list.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { get_api } from './api';\nimport { Context } from './context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const List = () => {\n  _s();\n\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [url, setUrl] = useState('');\n  const [message, setMessage] = useState('');\n  const [context, setContext] = useContext(Context);\n  useEffect(() => {\n    get_api('list').then(res => {\n      console.log(res.data);\n      let filesUrl = [];\n      setFiles(res.data.files);\n      setLoading(false);\n    });\n  }, [context, loading]);\n\n  const download = async file => {\n    var element = document.getElementById(file.id);\n    let blob = await fetch(file.url).then(r => r.blob());\n    let url = await URL.createObjectURL(blob);\n    element.href = url;\n    element.click();\n    setUrl(url);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loading ? 'Loading ...' : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: files && files.length > 0 && files.map((each, index) => /*#__PURE__*/_jsxDEV(\"ol\", {\n        className: \"list\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"App-link\",\n            id: each.id,\n            href: url,\n            download: true,\n            children: each.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 10\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          onClick: () => download(each),\n          children: \"Download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 9\n        }, this)]\n      }, each.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 8\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\n_s(List, \"u87hZDPvFKg1TgNqswDvmc1XSyM=\");\n\n_c = List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["/Users/tanyajain/study/s3upload/client/src/list.js"],"names":["React","useState","useEffect","useContext","get_api","Context","List","files","setFiles","loading","setLoading","url","setUrl","message","setMessage","context","setContext","then","res","console","log","data","filesUrl","download","file","element","document","getElementById","id","blob","fetch","r","URL","createObjectURL","href","click","length","map","each","index","name"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,SAASC,OAAT,QAAwB,WAAxB;;;AAEA,OAAO,MAAMC,IAAI,GAAG,MAAM;AAAA;;AACzB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACQ,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACU,GAAD,EAAMC,MAAN,IAAgBX,QAAQ,CAAC,EAAD,CAA9B;AACA,QAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACc,OAAD,EAAUC,UAAV,IAAwBb,UAAU,CAACE,OAAD,CAAxC;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACfE,IAAAA,OAAO,CAAC,MAAD,CAAP,CAAgBa,IAAhB,CAAsBC,GAAD,IAAS;AAC7BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACA,UAAIC,QAAQ,GAAG,EAAf;AACAd,MAAAA,QAAQ,CAACU,GAAG,CAACG,IAAJ,CAASd,KAAV,CAAR;AACAG,MAAAA,UAAU,CAAC,KAAD,CAAV;AAEA,KAND;AAOA,GARQ,EAQN,CAACK,OAAD,EAAUN,OAAV,CARM,CAAT;;AAUA,QAAMc,QAAQ,GAAG,MAAOC,IAAP,IAAgB;AAChC,QAAIC,OAAO,GAAGC,QAAQ,CAACC,cAAT,CAAwBH,IAAI,CAACI,EAA7B,CAAd;AACA,QAAIC,IAAI,GAAG,MAAMC,KAAK,CAACN,IAAI,CAACb,GAAN,CAAL,CAAgBM,IAAhB,CAAsBc,CAAD,IAAOA,CAAC,CAACF,IAAF,EAA5B,CAAjB;AAEA,QAAIlB,GAAG,GAAG,MAAMqB,GAAG,CAACC,eAAJ,CAAoBJ,IAApB,CAAhB;AACAJ,IAAAA,OAAO,CAACS,IAAR,GAAevB,GAAf;AACAc,IAAAA,OAAO,CAACU,KAAR;AACAvB,IAAAA,MAAM,CAACD,GAAD,CAAN;AACA,GARD;;AAUA,sBACC;AAAA,cACEF,OAAO,GACP,aADO,gBAGP;AAAA,gBACEF,KAAK,IACLA,KAAK,CAAC6B,MAAN,GAAe,CADf,IAEA7B,KAAK,CAAC8B,GAAN,CAAU,CAACC,IAAD,EAAOC,KAAP,kBACT;AAAI,QAAA,SAAS,EAAC,MAAd;AAAA,gCACC;AAAA,iCACC;AAAG,YAAA,SAAS,EAAC,UAAb;AAAwB,YAAA,EAAE,EAAED,IAAI,CAACV,EAAjC;AAAqC,YAAA,IAAI,EAAEjB,GAA3C;AAAgD,YAAA,QAAQ,MAAxD;AAAA,sBACE2B,IAAI,CAACE;AADP;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBADD,eAMC;AAAQ,UAAA,SAAS,EAAC,QAAlB;AAA2B,UAAA,OAAO,EAAE,MAAMjB,QAAQ,CAACe,IAAD,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAND;AAAA,SAA0BA,IAAI,CAACV,EAA/B;AAAA;AAAA;AAAA;AAAA,cADD;AAHF;AAAA;AAAA;AAAA;AAAA;AAJF,mBADD;AAsBA,CAjDM;;GAAMtB,I;;KAAAA,I","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { get_api } from './api';\nimport { Context } from './context';\n\nexport const List = () => {\n\tconst [files, setFiles] = useState([]);\n\tconst [loading, setLoading] = useState(true);\n\tconst [url, setUrl] = useState('');\n\tconst [message, setMessage] = useState('');\n\tconst [context, setContext] = useContext(Context);\n\n\tuseEffect(() => {\n\t\tget_api('list').then((res) => {\n\t\t\tconsole.log(res.data);\n\t\t\tlet filesUrl = [];\n\t\t\tsetFiles(res.data.files);\n\t\t\tsetLoading(false);\n\t\t\t\n\t\t});\n\t}, [context, loading]);\n\n\tconst download = async (file) => {\n\t\tvar element = document.getElementById(file.id);\n\t\tlet blob = await fetch(file.url).then((r) => r.blob());\n\n\t\tlet url = await URL.createObjectURL(blob);\n\t\telement.href = url;\n\t\telement.click();\n\t\tsetUrl(url);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{loading ? (\n\t\t\t\t'Loading ...'\n\t\t\t) : (\n\t\t\t\t<ul>\n\t\t\t\t\t{files &&\n\t\t\t\t\t\tfiles.length > 0 &&\n\t\t\t\t\t\tfiles.map((each, index) => (\n\t\t\t\t\t\t\t<ol className=\"list\" key={each.id}>\n\t\t\t\t\t\t\t\t<h4>\n\t\t\t\t\t\t\t\t\t<a className=\"App-link\" id={each.id} href={url} download>\n\t\t\t\t\t\t\t\t\t\t{each.name}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t\t<button className=\"button\" onClick={() => download(each)}>Download</button>\n\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</>\n\t);\n};\n"]},"metadata":{},"sourceType":"module"}