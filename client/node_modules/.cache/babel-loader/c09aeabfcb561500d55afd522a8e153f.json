{"ast":null,"code":"var _jsxFileName = \"/Users/tanyajain/study/s3upload/client/src/list.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { get_api } from './api';\nimport { Context } from './context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const List = () => {\n  _s();\n\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [message, setMessage] = useState('');\n  const [context, setContext] = useContext(Context);\n  useEffect(() => {\n    get_api('list').then(res => {\n      console.log(res.data);\n      let filesUrl = [];\n\n      for (let i = 0; i < res.data.files.length; i++) {\n        download(res.data.files[i]).then(url => {\n          filesUrl.push(url);\n          setLoading(false);\n          setFiles(filesUrl);\n        });\n      }\n    });\n  }, [context]);\n\n  const download = async file => {\n    var element = document.createElement('a');\n    let blob = await fetch(file).then(r => r.blob());\n    await console.log(blob);\n    return await URL.createObjectURL(blob);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: loading ? 'Loading ...' : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: files && files.length > 0 && files.map((each, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"upload\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            href: each,\n            download: true,\n            children: index\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 10\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => download(each),\n          children: \"Download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 9\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 8\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n};\n\n_s(List, \"urw4Zy2CUa2RgxtZDqRSj5d4PUs=\");\n\n_c = List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["/Users/tanyajain/study/s3upload/client/src/list.js"],"names":["React","useState","useEffect","useContext","get_api","Context","List","files","setFiles","loading","setLoading","message","setMessage","context","setContext","then","res","console","log","data","filesUrl","i","length","download","url","push","file","element","document","createElement","blob","fetch","r","URL","createObjectURL","map","each","index"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,SAASC,OAAT,QAAwB,WAAxB;;;AAEA,OAAO,MAAMC,IAAI,GAAG,MAAM;AAAA;;AACzB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACQ,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACU,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBX,UAAU,CAACE,OAAD,CAAxC;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACfE,IAAAA,OAAO,CAAC,MAAD,CAAP,CAAgBW,IAAhB,CAAsBC,GAAD,IAAS;AAC7BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAhB;AACA,UAAIC,QAAQ,GAAG,EAAf;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,GAAG,CAACG,IAAJ,CAASZ,KAAT,CAAee,MAAnC,EAA2CD,CAAC,EAA5C,EAAgD;AAC/CE,QAAAA,QAAQ,CAACP,GAAG,CAACG,IAAJ,CAASZ,KAAT,CAAec,CAAf,CAAD,CAAR,CAA4BN,IAA5B,CAAkCS,GAAD,IAAS;AACzCJ,UAAAA,QAAQ,CAACK,IAAT,CAAcD,GAAd;AACAd,UAAAA,UAAU,CAAC,KAAD,CAAV;AACAF,UAAAA,QAAQ,CAACY,QAAD,CAAR;AACA,SAJD;AAKA;AACD,KAVD;AAWA,GAZQ,EAYN,CAACP,OAAD,CAZM,CAAT;;AAcA,QAAMU,QAAQ,GAAG,MAAOG,IAAP,IAAgB;AAChC,QAAIC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAd;AACA,QAAIC,IAAI,GAAG,MAAMC,KAAK,CAACL,IAAD,CAAL,CAAYX,IAAZ,CAAkBiB,CAAD,IAAOA,CAAC,CAACF,IAAF,EAAxB,CAAjB;AACA,UAAMb,OAAO,CAACC,GAAR,CAAYY,IAAZ,CAAN;AACA,WAAO,MAAMG,GAAG,CAACC,eAAJ,CAAoBJ,IAApB,CAAb;AACA,GALD;;AAOA,sBACC;AAAA,cACErB,OAAO,GACP,aADO,gBAGP;AAAA,gBACEF,KAAK,IACLA,KAAK,CAACe,MAAN,GAAe,CADf,IAEAf,KAAK,CAAC4B,GAAN,CAAU,CAACC,IAAD,EAAOC,KAAP,kBACT;AAAI,QAAA,SAAS,EAAC,QAAd;AAAA,gCACC;AAAA,iCACC;AAAG,YAAA,IAAI,EAAED,IAAT;AAAe,YAAA,QAAQ,MAAvB;AAAA,sBACEC;AADF;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,gBADD,eAMC;AAAQ,UAAA,OAAO,EAAE,MAAMd,QAAQ,CAACa,IAAD,CAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAND;AAAA,SAA4BC,KAA5B;AAAA;AAAA;AAAA;AAAA,cADD;AAHF;AAAA;AAAA;AAAA;AAAA;AAJF,mBADD;AAsBA,CAjDM;;GAAM/B,I;;KAAAA,I","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { get_api } from './api';\nimport { Context } from './context';\n\nexport const List = () => {\n\tconst [files, setFiles] = useState([]);\n\tconst [loading, setLoading] = useState(true);\n\tconst [message, setMessage] = useState('');\n\tconst [context, setContext] = useContext(Context);\n\n\tuseEffect(() => {\n\t\tget_api('list').then((res) => {\n\t\t\tconsole.log(res.data);\n\t\t\tlet filesUrl = [];\n\t\t\tfor (let i = 0; i < res.data.files.length; i++) {\n\t\t\t\tdownload(res.data.files[i]).then((url) => {\n\t\t\t\t\tfilesUrl.push(url);\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t\tsetFiles(filesUrl);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}, [context]);\n\n\tconst download = async (file) => {\n\t\tvar element = document.createElement('a');\n\t\tlet blob = await fetch(file).then((r) => r.blob());\n\t\tawait console.log(blob);\n\t\treturn await URL.createObjectURL(blob);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{loading ? (\n\t\t\t\t'Loading ...'\n\t\t\t) : (\n\t\t\t\t<ul>\n\t\t\t\t\t{files &&\n\t\t\t\t\t\tfiles.length > 0 &&\n\t\t\t\t\t\tfiles.map((each, index) => (\n\t\t\t\t\t\t\t<li className=\"upload\" key={index}>\n\t\t\t\t\t\t\t\t<h2>\n\t\t\t\t\t\t\t\t\t<a href={each} download>\n\t\t\t\t\t\t\t\t\t\t{index}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t<button onClick={() => download(each)}>Download</button>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t)}\n\t\t</>\n\t);\n};\n"]},"metadata":{},"sourceType":"module"}