{"ast":null,"code":"var _jsxFileName = \"/Users/tanyajain/study/s3upload/client/src/upload.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport { post_api } from './api';\nimport { Context } from './context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Upload = () => {\n  _s();\n\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState(''); //**context\n\n  const [context, setContext] = useContext(Context); //**  On file upload (click the upload button)\n\n  const onFileUpload = () => {\n    setLoading(true);\n    let formData = new FormData();\n\n    if (selectedFile && selectedFile.name) {\n      formData.append('file', selectedFile);\n      formData.append('name', selectedFile.name);\n      post_api('upload', formData).then(res => {\n        console.log(res);\n\n        if (res.status == 200) {\n          setContext(true);\n        }\n\n        setLoading(false);\n        setMessage(res.data.Message);\n      });\n    } else {\n      setLoading(false);\n      selectedFile ? setMessage('Something went wrong,Try Again!!') : setMessage('Select a  file first!');\n    }\n  }; //**On file select (from the pop up)\n\n\n  const onFileChange = event => {\n    // Update the state\n    setSelectedFile(event.target.files[0]);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [loading ? 'Loading ...' : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        for: \"myfile\",\n        children: \"Select a file to upload:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"App-link\",\n        type: \"file\",\n        id: \"myfile\",\n        name: \"myfile\",\n        onChange: onFileChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onFileUpload,\n        children: \"Upload!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"err\",\n        children: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Upload, \"hrhOVCnCC5x1FzwbejwuGTfXiN0=\");\n\n_c = Upload;\n\nvar _c;\n\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"sources":["/Users/tanyajain/study/s3upload/client/src/upload.js"],"names":["React","useState","useContext","post_api","Context","Upload","selectedFile","setSelectedFile","loading","setLoading","message","setMessage","context","setContext","onFileUpload","formData","FormData","name","append","then","res","console","log","status","data","Message","onFileChange","event","target","files"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,QAA4C,OAA5C;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,OAAT,QAAwB,WAAxB;;;AAEA,OAAO,MAAMC,MAAM,GAAG,MAAM;AAAA;;AAC3B,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCN,QAAQ,CAAC,IAAD,CAAhD;AACA,QAAM,CAACO,OAAD,EAAUC,UAAV,IAAwBR,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACS,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,EAAD,CAAtC,CAH2B,CAKxB;;AACH,QAAM,CAACW,OAAD,EAAUC,UAAV,IAAwBX,UAAU,CAACE,OAAD,CAAxC,CAN2B,CAQ3B;;AACA,QAAMU,YAAY,GAAG,MAAM;AAC1BL,IAAAA,UAAU,CAAC,IAAD,CAAV;AACA,QAAIM,QAAQ,GAAG,IAAIC,QAAJ,EAAf;;AACA,QAAIV,YAAY,IAAIA,YAAY,CAACW,IAAjC,EAAuC;AACtCF,MAAAA,QAAQ,CAACG,MAAT,CAAgB,MAAhB,EAAwBZ,YAAxB;AACAS,MAAAA,QAAQ,CAACG,MAAT,CAAgB,MAAhB,EAAwBZ,YAAY,CAACW,IAArC;AACAd,MAAAA,QAAQ,CAAC,QAAD,EAAWY,QAAX,CAAR,CAA6BI,IAA7B,CAAmCC,GAAD,IAAS;AAC1CC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;;AACA,YAAIA,GAAG,CAACG,MAAJ,IAAc,GAAlB,EAAuB;AACtBV,UAAAA,UAAU,CAAC,IAAD,CAAV;AACA;;AACDJ,QAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,QAAAA,UAAU,CAACS,GAAG,CAACI,IAAJ,CAASC,OAAV,CAAV;AACA,OAPD;AAQA,KAXD,MAWO;AACNhB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAH,MAAAA,YAAY,GAAGK,UAAU,CAAC,kCAAD,CAAb,GAAoDA,UAAU,CAAC,uBAAD,CAA1E;AACA;AACD,GAlBD,CAT2B,CA6B3B;;;AACA,QAAMe,YAAY,GAAIC,KAAD,IAAW;AAC/B;AACApB,IAAAA,eAAe,CAACoB,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAf;AACA,GAHD;;AAKA,sBACC;AAAA,eACErB,OAAO,GAAG,aAAH,GAAmB,IAD5B,eAEC;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA,8BACC;AAAO,QAAA,GAAG,EAAC,QAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,eAEC;AAAO,QAAA,SAAS,EAAC,UAAjB;AAA4B,QAAA,IAAI,EAAC,MAAjC;AAAwC,QAAA,EAAE,EAAC,QAA3C;AAAoD,QAAA,IAAI,EAAC,QAAzD;AAAkE,QAAA,QAAQ,EAAEkB;AAA5E;AAAA;AAAA;AAAA;AAAA,cAFD,eAGC;AAAQ,QAAA,OAAO,EAAEZ,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHD,eAIC;AAAG,QAAA,SAAS,EAAC,KAAb;AAAA,kBAAoBJ;AAApB;AAAA;AAAA;AAAA;AAAA,cAJD;AAAA;AAAA;AAAA;AAAA;AAAA,YAFD;AAAA,kBADD;AAWA,CA9CM;;GAAML,M;;KAAAA,M","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { post_api } from './api';\nimport { Context } from './context';\n\nexport const Upload = () => {\n\tconst [selectedFile, setSelectedFile] = useState(null);\n\tconst [loading, setLoading] = useState(false);\n\tconst [message, setMessage] = useState('');\n\n    //**context\n\tconst [context, setContext] = useContext(Context);\n\n\t//**  On file upload (click the upload button)\n\tconst onFileUpload = () => {\n\t\tsetLoading(true);\n\t\tlet formData = new FormData();\n\t\tif (selectedFile && selectedFile.name) {\n\t\t\tformData.append('file', selectedFile);\n\t\t\tformData.append('name', selectedFile.name);\n\t\t\tpost_api('upload', formData).then((res) => {\n\t\t\t\tconsole.log(res);\n\t\t\t\tif (res.status == 200) {\n\t\t\t\t\tsetContext(true);\n\t\t\t\t}\n\t\t\t\tsetLoading(false);\n\t\t\t\tsetMessage(res.data.Message);\n\t\t\t});\n\t\t} else {\n\t\t\tsetLoading(false);\n\t\t\tselectedFile ? setMessage('Something went wrong,Try Again!!') : setMessage('Select a  file first!');\n\t\t}\n\t};\n\n\t//**On file select (from the pop up)\n\tconst onFileChange = (event) => {\n\t\t// Update the state\n\t\tsetSelectedFile(event.target.files[0]);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{loading ? 'Loading ...' : null}\n\t\t\t<div className=\"upload\">\n\t\t\t\t<label for=\"myfile\">Select a file to upload:</label>\n\t\t\t\t<input className=\"App-link\" type=\"file\" id=\"myfile\" name=\"myfile\" onChange={onFileChange} />\n\t\t\t\t<button onClick={onFileUpload}>Upload!</button>\n\t\t\t\t<p className=\"err\">{message}</p>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n"]},"metadata":{},"sourceType":"module"}